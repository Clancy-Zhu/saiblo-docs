# 游戏规则

## 规则简述

由两个玩家挑选角色、构建队伍、进行回合制对抗的SRPG游戏

本游戏中的角色库中共有12条鱼，所有鱼都有相同的攻击力和血量值，但有着不完全相同的技能组（包括一个主动技能和一个被动技能）。

双方玩家用12条鱼进行三轮比拼，每轮需要选择尚未被选择的4条鱼上场进行对战。三轮中优先获得两轮胜利的玩家成为最终的胜者。

## 鱼的属性

鱼的属性包括攻击力、生命值、被动技能和主动技能。

所有的鱼的初始生命值和**上限**都是400，攻击力初始都是100，但根据技能效果攻击力有可能会提升。

每条鱼都拥有一个被动技能和主动技能，但不同的鱼可能会拥有相同的被动技能或主动技能。

被动技能当满足触发条件时便会触发，玩家不能选择是否触发。

主动技能可以由玩家主动选择是否触发。

在对应鱼行动时，玩家可以选择普通攻击或者使用该鱼的主动技能。

普通攻击会选择一名敌方目标，造成相当于攻击力一半的伤害（初始50），主动的技能的效果则请参考之后的技能介绍。

当鱼的生命值降到0及以下时，该鱼死亡，将会被移出战斗。

## 断言机制

本游戏的核心机制，通过隐藏身份和断言制造未知因素和意外事件，增加不确定性。

从上场战斗开始后，一条鱼便处于**隐藏身份**的状态（对手不知道这是哪条鱼）。除非通过**断言**操作使对方的鱼暴露身份，否则该鱼将一直隐藏（即使**该鱼死亡或本场战斗结束**）。

玩家在其行动回合开始时（在鱼行动之前）可以选择对敌方一条场上**存活的隐藏身份鱼**进行断言，戳穿对面的身份，如果断言成功，该鱼会失去掩盖直接暴露且对方所有鱼减少50的血量，断言失败则己方所有鱼减少50的血量。

注意：只有断言拟态鱼为拟态鱼才成功，断言拟态鱼为其模仿的鱼不成功。

## 游戏流程

游戏一共分为三轮，每轮以【选择阶段】开始，并以回合制顺序让双方玩家轮流执行回合，一个玩家回合包括【断言阶段】和【行动阶段】。

在第一轮中，玩家的先后手将会随机决定。此后，每一轮的获胜者将自动在下一轮中成为后手。

### 选择阶段

在12条鱼中还未上过场的鱼里选4条作为出场队伍，此决定不可更改。如果选择了拟态鱼上场，还需要选择拟态鱼拟态的对象（其他11条鱼之一）。  

### 断言阶段

决定是否断言敌方鱼身份 ，选择断言的话只能选择一条敌方目标进行断言，不能选择多条。

### 行动阶段

玩家进行操作的回合，选择一条己方还存活的鱼行动，行动可以分为普通攻击或释放主动技能。

### 其他说明

AI进行的每种操作时间(Pick/Assert/Act)不应超过3s。

当一方鱼全部死亡，另一方鱼还未全部死亡时，判还未全部死亡的这一方胜。

如果一方通过一个行动使得双方鱼都全部死亡，判这个行动方胜。

当AI不合法时（运行时错误、超时或**操作不合法**），整局游戏将会直接结束，并直接判定对手AI获胜，请一定注意这点。

每一轮对局的回合数上限是64回合。即己方鱼最多行动32次(断言+行动算一个回合)，敌方鱼最多行动32次。如果对局达到64回合且敌方鱼没有全部阵亡，则按照以下规则进行判定本轮胜负：

* 场上剩余鱼数最多的一方获胜。
* 若场上剩余鱼数一样，则比较鱼的总生命值。总生命值高的一方获胜。
* 若总生命值一样，则比较双方场上生命值最高的一条鱼的生命值。生命值高的一方获胜
* 如果以上条件还是不能判定输赢，则后手一方获胜。

## 技能说明

### 概念说明

**直接攻击**：行动阶段使用**普通攻击**或**主动技能**对**敌人**造成的伤害都算直接伤害（同理把这样的行动称为直接攻击，行动鱼称为**来源**），除此之外反伤类技能、承伤类技能造成的伤害等不算直接伤害。

**伤害**：造成途径多样，如普通攻击、攻击型主动技能、承伤类被动技能传导、反伤类被动技能等。

（断言成功或失败带来的**血量减少**则既不属于**直接攻击**也不属于**伤害**）

**队友**：指和自己同一场上场的除自己以外的一条鱼（因此默认不包括自己）。

**下次被……：**技能中可能会出现延时效果，如“下次被直接攻击而受到伤害时伤害减少70%”，多种延时效果可以并存，而同类延时效果**不可叠加**（不能叠加出“下两次伤害减少70%”，也不能叠加出“下次伤害减少49%”）。当一条鱼身上有延时效果时，满足效果的触发条件时会触发该效果，然后该鱼失去此效果。

### 时机说明

技能或效果的触发结算时机从前到后遵守下面的顺序：

**将要受到伤害前**：在这个时机会触发的技能是闪避或海龟的护盾，如果闪避成功或被盾抵挡，按闪避类被动和海龟被动描述，本体并**没有受到伤害**，因此触发时机是**受到伤害时**或**受到伤害后**的效果并不会被触发。

**受到伤害时**：在这个时机会触发的效果是电鳗和翻车鱼的承伤被动，以及两种延时效果减伤和承伤，结算优先级是承伤被动>减伤延时>承伤延时。（以及这个时机触发的所有效果都恰好在被直接攻击时才会触发！）

**受到伤害**：**受到伤害时**这个时机结算完后，结算**受到伤害**，对应鱼扣除对应血量。

**受到伤害后**：在这个时机会触发的效果是一种延时效果回血以及章鱼和大白鲨的回血被动，结算优先级是延时效果的回血>被动技能的回血。

**被直接攻击后**：当伤害是有来源伤害时会出现的时机（注意即便闪避或被盾抵挡，该时机仍存在），在这个时机会触发的技能是射水鱼和喷火鱼的护友反伤被动，以及锤头鲨的亡语爆炸被动和小丑鱼的残血反伤被动，结算优先级是残血反伤/亡语爆炸>护友反伤。



以上是对鱼技能介绍中出现的概念及时机的简单说明，对于如何判定鱼存活、承伤类效果如何结算、回血类效果如何处理多段伤害、同优先级效果如何决定结算顺序及突发触发效果如何结算，请阅读之后的结算说明。

### 12条鱼的技能介绍

#### 1. 射水鱼

**【被动技能】：**队友被**直接攻击后**，若其生命值少于30%（即120），对来源造成30的伤害  

**【主动技能】：**对敌方所有目标发动攻击，每个造成35%攻击力的伤害  

#### 2. 喷火鱼

**【被动技能】：**队友被**直接攻击后**，若其生命值少于30%（即120），对来源造成30的伤害  

**【主动技能】：**对一名队友发动攻击造成50伤害，并使自身攻击力**永久**提升70    

#### 3. 电鳗

**【被动技能】：**自身受到敌方**直接攻击而受到伤害时**，如果还有队友存活，会让队友帮忙承受伤害（自身承受70%，其余队友平摊30%）；每累计受到的实际伤害值达到200，自身攻击值**永久**提升20    

**【主动技能】：**对敌方所有目标发动攻击，每个造成35%攻击力的伤害

#### 4. 翻车鱼

**【被动技能】：**自身受到敌方**直接攻击而受到伤害时**，如果还有队友存活，会让队友帮忙承受伤害（自身承受70%，其余队友平摊30%）；每累计受到的实际伤害值达到200，自身攻击值**永久**提升20  

**【主动技能】：**对一名队友发动攻击造成50伤害，并使自身攻击力**永久**提升70

#### 5. 海狼鱼

**【被动技能】：**每次**将要受到伤害前**有30%概率躲避伤害（不受到伤害，触发时机包括敌方直接攻击，队友或敌方发动技能造成的伤害等）  

**【主动技能】：**对一名敌人造成120的暴击伤害 

#### 6. 蝠鲼

**【被动技能】：**每次**将要受到伤害前**有30%概率躲避伤害（不受到伤害，触发时机包括敌方直接攻击，队友或敌方发动技能造成的伤害等）  

**【主动技能】：**选择一名队友（可以是自己），令其**下次被直接攻击而受到伤害时**减免70%伤害，并立即使自身攻击力**永久**提升20   

#### 7. 海龟

**【被动技能】：**拥有三层无敌护盾，在三次**将要受到的伤害前**抵挡伤害（不受到伤害）；三层护盾失去后，每次**将要受到伤害时**有30%概率躲避伤害（不受到伤害）

**【主动技能】：**选择一名队友，令其**下次被直接攻击而受到伤害后**，若生命值仍大于0，自动恢复20血量，如果主动技能发动次数不超过三次，还应该选择对一名敌人造成120的暴击伤害  

#### 8. 章鱼

**【被动技能】：**当**受到伤害后**，若生命值仍大于0，自动恢复20血量  

**【主动技能】：**选择一名队友（可以是自己），令其**下次被直接攻击而受到伤害时**减免70%伤害，并立即使自身攻击力永久提升20   

#### 9. 大白鲨

**【被动技能】：**当**受到伤害后**，若生命值仍大于0，自动恢复20血量  

**【主动技能】：**选择一名场上血量最少的敌人造成120%攻击力的暴击伤害，当目标血量低于其生命值40%（即160）时改为造成140%攻击力的暴击伤害  

#### 10. 锤头鲨

**【被动技能】：**自身被**直接攻击后**若生命值不大于0，会触发爆炸，对来源造成40的伤害；血量低于20%（即80）时，自身攻击力提高15   

**【主动技能】：**选择一名场上血量最少的敌人造成120%攻击力的暴击伤害，当目标血量低于其生命值40%（即160）时改为造成140%攻击力的暴击伤害

#### 11. 小丑鱼

**【被动技能】：**自身被**直接攻击后**若生命值少于30%（即120），对来源造成30的伤害   

**【主动技能】：**选择一名队友，令其**下次被直接攻击而受到伤害时**，如果有除其以外的己方角色存活，其只承受70%伤害，其余己方角色平摊30%伤害，如果主动技能发动次数不超过三次，还应该对所有敌人分别造成35%的伤害  

#### 12. 拟态鱼

**【被动技能】：**战斗开始前，选择其余11条鱼中的任意一条，获得其的被动与主动技能     

**【主动技能】：**无 

## 结算说明

1、队友或敌方鱼的存活或死亡状态在一次操作（断言或行动）后才会重新判定。也即**只要一只鱼在一次行动前血量仍然大于0，那么这次行动中任何时候都认为其存活**。

举例：

**【被动技能】：**自身受到敌方**直接攻击**时，如果还有队友存活，会让队友帮忙承受伤害（自身承受70%，其余队友平摊30%）；每次受到伤害时，若伤害值超过200，自身攻击值永久提升20  

假设己方有一只电鳗（被动技能是让存活队友帮忙承伤），有一只奄奄一息的队友。

敌方的射水鱼发动主动技能把队友打死了，同时也打了电鳗，此时承伤行为仍会发生（因为在行动中，即使队友血量已经在0及以下了）。

2、受伤回血类被动受到多段伤害可以回多次血，但**不能秽土转生**（被一次伤害打到0血及以下后即被斩杀，不会再触发回血）。

注意，“下次被攻击后回复血量”这个延时效果也适用该条说明。

3、承伤类效果会先结算队友，再结算自己。

拥有承伤类被动的角色如果被小丑鱼上了延时效果，被攻击时会发动两次承伤，最终只受 49% 的伤害，让队友平摊 51% ，且队友会受到两段伤害（分别来自两次承伤）。

4、基于攻击力倍率造成的伤害均只考虑这次行动前的攻击力，而不受到结算过程中攻击力提升的影响。

举例：

电鳗发动主动技能攻击敌方，敌方现在是

0 号位，奄奄一息的章鱼。

1 号位，喷火鱼。

在电鳗攻击章鱼造成35伤害后，被喷火鱼反伤导致触发电鳗攻击力提升被动，但是电鳗仍只会对喷火鱼造成35的伤害而不是42。

5、大多数效果的目标在对象同优先级时，会按照鱼的位置号从小到大进行依次结算，结算过程中触发新的效果则会插入结算。**安排战略时也请考虑位置的影响**。

举例：

射水鱼发动主动技能攻击敌方，敌方现在是

0 号位，还有三层盾的海龟。

1 号位，上了小丑鱼buff的电鳗。

2 号位，翻车鱼。

3 号位，章鱼



先结算海龟，掉一层盾，还剩两层。

结算电鳗的承伤，电鳗此时只需要承受24点伤害，顺序结算其他队友分别该受到3点伤害，海龟掉一层盾而只剩一层，翻车鱼掉3血，章鱼掉3血回复20血。

结算电鳗需要承受的24点伤害和小丑鱼buff，电鳗此时只需要承受16点伤害，顺序结算其他队友分别该受到2点伤害，海龟被破盾，翻车鱼掉2血，章鱼掉2血回复20血。

最后电鳗掉16血。

结算翻车鱼的承伤，同理，这一次海龟没盾了会受到翻车鱼的传导伤害。







## 游戏过程可知信息详细说明

该部分描述游戏过程中具体可知的信息，玩家可以通过调用AI SDK接口获得相关信息。



在【选择阶段】中，玩家**无法**看到对方执行的任何操作，双方选择结束后四条鱼以隐藏形态上场进入游戏中。



在【断言阶段】中，已暴露的和死了的鱼不能被断言，玩家也可以选择不断言。所有断言阶段的结果（断言成功了还是失败了，一条鱼因断言成功而暴露身份是什么）双方**可知**。  



在敌方【行动阶段】中，有些信息是我方可知的，详细如下：

敌方选择行动的鱼是我方**可知**的，同时我方**可知**对方选择了普通攻击还是主动技能；

敌方选择普通攻击操作攻击的目标和造成的伤害是我方**可知**的；

我方可以大概知道对方选择的主动技能类型，类型分为这样几类——

1、 aoe（群体攻击）类主动技能，同时我方**可知**被攻击的目标和分别造成的伤害（小丑鱼有限次数内的aoe，也会被归为这类）；

2、 伤害队友类主动技能，同时我方**可知**被伤害的敌方目标；

3、 暴击类主动技能，同时我方**可知**被攻击的目标和造成的伤害（海狼鱼的易伤暴击，大白鲨的弱者暴击，海龟有限次数内的暴击，都会被归为这类）；

4、 无作为类主动技能，即不能明显的知道对方干了什么，因而我方**不知道更多信息**（蝠鲼的伤害减免，海龟有限次数后的给队友下次回血，小丑鱼有限次数后的让队友承伤，都会被归为这类）；



在【行动阶段】中，双方的操作都有可能引发鱼的被动技能或延时效果，双方都**可知**被触发的类型和触发效果的对象 ，类型分为这样几类——

1、 反伤类被动，双方**可知**是哪条鱼被攻击时引发了反伤效果（射水鱼的护友反伤和小丑鱼的残血反伤，都会被归为这类）；

2、 承伤类被动，双方**可知**是哪条鱼被攻击时引发了承伤效果从而将伤害分摊给了其余队友（小丑鱼给队友上的承伤也会被归为这类）；

3、 减伤类被动，除了承伤类被动外，实际造成伤害比应该造成伤害小时，双方**可知**是哪条鱼受到的伤害被降低了以及实际造成伤害与应该造成伤害的比例关系（蝠鲼闪避成功，章鱼给队友上的减伤，海龟金衣抵挡伤害，都会被归为这类）；

4、 回血类被动，当一条鱼被攻击后出现了回复血量的行为时，双方**可知**是哪条鱼回复了自己的血量（章鱼受伤自回血和海龟给队友上的自回血都会被归为这类）

5、 亡语类被动，当锤头鲨或拟态鱼模仿的锤头鲨死亡触发爆炸时双方**可知**；



除此之外，没有被描述为**可知**的行为，则不能够在游戏进程中知道。